<style media="screen">
  /* .entTab{
    width:100px;
    height:60px;
    border-radius:10px;
    color: white;
    font-weight: bold;
    font-size: 20px;
    text-align: center;
    vertical-align: middle;
    margin-top: 10px;
  }
  .unActived{
    background-color: #909090;
  }
  .actived{
    background-color: #FFCD28;
  } */
</style>
<script>

$(document).ready(function(){
/*
  $('#scoreWrapper').append(`<div class="entTab unActived">off</div>`);
  $('.showProjectBtn').change(function(){
    var a = $(this);
    if(a.hasClass("ng-hide")){
      if($('.entTab').hasClass("ng-hide")){
        $('.entTab').removeClass("ng-hide");
      }
    }else{
      if(!$('.entTab').hasClass("ng-hide")){
        $('.entTab').addClass("ng-hide");
      }
    }
  });
  */
  console.log("ewwefewfwee");
  if(Entry.projectId != undefined){
    var id = Entry.projectId;
    checkLike(id);
    checkFavorite(id);
    $(".likeBtn").click(function(){
      checkLike(id);
    });
    $(".interestBtn").click(function(){
      checkFavorite(id);
    })
  }
});

function checkLike(id){
  console.log("likeBtn is clicked");
  $.ajax({
    url: `https://playentry.org/api/project/likes/${id}?rows=100000000000000&targetSubject=project&targetType=individual`,
    dataType:"json",
    type:"GET",
    success:
    function(data){
      for(var i = 0; i<data.length;i++){
        if(data[i].user.username == window.user.username){
          break;
        }
      }
      Entry.variableContainer.getVariableByName("entLike").setValue((i!=data.length) ? "1" : "0");
      console.log(Entry.variableContainer.getVariableByName("entLike").value_);
    }
  });
}

function checkFavorite(id){
  console.log("favorBtn is clicked");
  $.ajax({
    url: `https://playentry.org/api/project/favorites/${id}?rows=100000000000000&targetSubject=project&targetType=individual`,
    dataType:"json",
    type:"GET",
    success:
    function(data){
      for(var i = 0; i<data.favorites.length;i++){
        if(data.favorites[i].user.username == window.user.username){
          break;
        }
      }
      Entry.variableContainer.getVariableByName("entFavor").setValue((i!=data.favorites.length) ? "1" : "0");
      console.log(Entry.variableContainer.getVariableByName("entLike").value_);
    }
  });
}
</script>
